!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.progressively=t()}(this,function(){"use strict";function e(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),n.appendChild(o),t}function t(e,t){var n={};for(var o in e)n[o]=t.hasOwnProperty(o)?t[o]:e[o];return n}function n(e){return null===e.offsetParent}function o(e,t){if(n(e))return!1;var o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.right<=(window.innerWidth||document.el.clientWidth)&&o.bottom<=(window.innerHeight||document.el.clientHeight)||e.clientHeight>=window.innerHeight}function i(e){setTimeout(function(){var t=new Image;t.onload=function(){e.classList.remove("progressive--not-loaded"),e.classList.add("progressive--is-loaded"),e.src=this.src,l(e)},t.src=e.dataset.progressive},d.delay)}function r(){s||(clearTimeout(s),s=setTimeout(function(){a.check(),a.render(),s=null},d.throttle))}e(".progressive{overflow:hidden;position:relative;background:#efefef}.progressive__img{display:block;width:100%;height:100%;transform:translateZ(0)}.progressive--not-loaded{filter:blur(30px)}.progressive--is-loaded{filter:blur(20px);animation:a .5s both}@keyframes a{0%{filter:blur(20px)}to{filter:blur(0)}}",void 0);var d,s,l,c,a={};return l=function(){},d={throttle:300,delay:100,onLoadComplete:function(){},onLoad:function(){}},a.init=function(e){e=e||{},d=t(d,e),l=d.onLoad||l,c=[].slice.call(document.querySelectorAll(".progressive__img")),a.render(),document.addEventListener?(window.addEventListener("scroll",r,!1),window.addEventListener("load",r,!1)):(window.attachEvent("onscroll",r),window.attachEvent("onload",r))},a.render=function(){for(var e,t=c.length-1;t>=0;--t)e=c[t],o(e)&&e.classList.contains("progressive--not-loaded")&&(i(e),c.splice(t,1));this.check()},a.check=function(){c.length||(d.onLoadComplete(),this.drop())},a.drop=function(){document.removeEventListener?window.removeEventListener("scroll",r):window.detachEvent("onscroll",r),clearTimeout(s)},a});